<!DOCTYPE HTML>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>The simple core - vJoule doc</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="Documentation for vJoule.">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <base href="../">

        <link rel="stylesheet" href="book.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <link rel="shortcut icon" href="favicon.png">

        <!-- Font Awesome -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme -->
        
        <link rel="stylesheet" href="custom.css">
        

        

        <!-- Fetch Clipboard.js from CDN but have a local fallback -->
        <script src="https://cdn.jsdelivr.net/clipboard.js/1.6.1/clipboard.min.js"></script>
        <script>
            if (typeof Clipboard == 'undefined') {
                document.write(unescape("%3Cscript src='clipboard.min.js'%3E%3C/script%3E"));
            }
        </script>

        <!-- Fetch JQuery from CDN but have a local fallback -->
        <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
        <script>
            if (typeof jQuery == 'undefined') {
                document.write(unescape("%3Cscript src='jquery.js'%3E%3C/script%3E"));
            }
        </script>

        <!-- Fetch store.js from local - TODO add CDN when 2.x.x is available on cdnjs -->
        <script src="store.js"></script>

    </head>
    <body class="light">
        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme = store.get('mdbook-theme');
            if (theme === null || theme === undefined) { theme = 'light'; }
            $('body').removeClass().addClass(theme);
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var sidebar = store.get('mdbook-sidebar');
            if (sidebar === "hidden") { $("html").addClass("sidebar-hidden") }
            else if (sidebar === "visible") { $("html").addClass("sidebar-visible") }
        </script>

        <div id="sidebar" class="sidebar">
            <ul class="chapter"><li><a href="./home/index.html"><strong>1.</strong> Home</a></li><li><a href="./getting_started/index.html"><strong>2.</strong> Getting started</a></li><li><ul class="section"><li><a href="./getting_started/what_is_vjoule.html"><strong>2.1.</strong> What is vJoule?</a></li><li><a href="./getting_started/installation.html"><strong>2.2.</strong> Installation</a></li><li><a href="./getting_started/first_tests.html"><strong>2.3.</strong> First tests</a></li></ul></li><li><a href="./user_guide/index.html"><strong>3.</strong> User Guide</a></li><li><ul class="section"><li><a href="./user_guide/directories_layout.html"><strong>3.1.</strong> Config files and logs</a></li><li><a href="./user_guide/simple_core.html" class="active"><strong>3.2.</strong> The simple core</a></li><li><a href="./user_guide/dumping_core.html"><strong>3.3.</strong> The dumper core</a></li><li><a href="./user_guide/sensor_plugins.html"><strong>3.4.</strong> Sensor plugins</a></li></ul></li><li><a href="./cli/index.html"><strong>4.</strong> vjoule CLI</a></li><li><ul class="section"><li><a href="./cli/exec.html"><strong>4.1.</strong> vjoule exec</a></li><li><a href="./cli/top.html"><strong>4.2.</strong> vjoule top</a></li></ul></li><li><a href="./api/index.html"><strong>5.</strong> API</a></li><li><ul class="section"><li><a href="./api/c++.html"><strong>5.1.</strong> C++</a></li><li><a href="./api/rust.html"><strong>5.2.</strong> Rust</a></li><li><a href="./api/py.html"><strong>5.3.</strong> Python</a></li></ul></li><li><a href="./troubleshooting/index.html"><strong>6.</strong> Trouble-shooting</a></li></ul>
        </div>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page" tabindex="-1">
                
                <div id="menu-bar" class="menu-bar">
                    <div class="left-buttons">
                        <i id="sidebar-toggle" class="fa fa-bars" title="Toggle sidebar"></i>
                        <i id="theme-toggle" class="fa fa-paint-brush" title="Change theme"></i>
                    </div>

                    <h1 class="menu-title">vJoule doc</h1>

                    <div class="right-buttons">
                        <a href="print.html">
                            <i id="print-button" class="fa fa-print" title="Print this book"></i>
                        </a>
                    </div>
                </div>

                <div id="content" class="content">
                    <a class="header" href="./user_guide/simple_core.html#the-simple-core" id="the-simple-core"><h1>The simple core</h1></a>
<p>The <code>simple</code> core is the core plugin used by default by the vJoule service. It
read the consumptions retreived using the sensors, and dump the results into
files. It can monitor four different kind of sensor plugins <code>cpu</code>, <code>gpu</code>, <code>ram</code>
and <code>pdu</code>.</p>
<a class="header" href="./user_guide/simple_core.html#result-files" id="result-files"><h2>Result files</h2></a>
<p>A result directory is created, in which five files <code>cpu</code>, <code>ram</code>, <code>gpu</code>,
<code>pdu_energy</code> and <code>pdu_power</code> can be found in the result directory (by default
<code>/etc/vjoule/results/</code>):</p>
<ul>
<li><code>cpu</code>: the consumption of energy of the CPU(s) in joules since the start of the service</li>
<li><code>ram</code>: the consumption of energy of the RAM in joules since the start of the service</li>
<li><code>gpu</code>: the consumption of energy of the GPU(s) in joules since the start of the service</li>
<li><code>pdu_energy</code>: the consumption of energy of the machine, according to the PDU in joules since the start of the service</li>
<li><code>pdu_power</code>: the current power consumption measured by the PDU in watts.</li>
</ul>
<a class="header" href="./user_guide/simple_core.html#usage" id="usage"><h2>Usage</h2></a>
<p>A default configuration and explanation of the <code>simple</code> core plugin can be
acquired by running the command <code>vjoule_service --ph simple</code>.</p>
<a class="header" href="./user_guide/simple_core.html#for-api-usage" id="for-api-usage"><h3>For API usage</h3></a>
<p>The configuration of the <code>simple</code> core plugin takes the parameter <code>freq</code>. This
parameter defines the number of iterations per second of reading from the
sensors and writing the results. However, when using an API, reading at a given
frequency can be a bit laborious and may lead to inaccurate results. For that
reason, the APIs are able to trigger the vjoule service, and no longer rely on
the service frequency. If the service is only to be used within an API (no
<code>vjoule top</code>), the frequency can be set to 0.</p>
<a class="header" href="./user_guide/simple_core.html#default-configuration" id="default-configuration"><h2>Default configuration</h2></a>
<pre><code class="language-toml">[sensor]
freq = 1 # frequency of update in hertz (the higher the faster)
log-lvl = &quot;info&quot; # debug &lt; success &lt; info &lt; warn &lt; error &lt; none
log-path = &quot;/etc/vjoule/log&quot; # log file (empty means stdout)
core = &quot;simple&quot; # the name of the core plugin to use for the sensor

# the directory in which result will be written
output-dir = &quot;/etc/vjoule/results&quot;

# if true mount the result directory in tmpfs (less i/o generated by vjoule)
mount-tmpfs = true

# following configuration is optional

[cpu] # configuration to enable CPU energy reading
name = &quot;rapl&quot; # rapl plugin for compatible intel or amd cpus

[ram] # configuration to enable RAM energy reading
name = &quot;rapl&quot; # rapl plugin for compatible intel or amd cpus

[gpu:0] # configuration to enable GPU energy reading
name = &quot;nvidia&quot; # nvidia plugin for nvidia GPUs

# A machine can have different GPU from different constructors
# For example a integrated GPU, and an nvidia GPU card
[gpu:1] # configuration to enable GPU energy 
name = &quot;rapl&quot; # rapl plugin form compatible intel or amd cpus

[pdu] # configuration to enable smart PDU reading
name = &quot;yocto&quot; # the yocto plugin to read YoctoWatt PDU consumption
</code></pre>
<p>On the other hand the flag <code>mount-tmpfs</code> will make the <code>divider</code> plugin mount
the result directory in tmpfs, to avoid making I/O access when writting the
result.</p>

                </div>

                <!-- Mobile navigation buttons -->
                
                    <a rel="prev" href="./user_guide/directories_layout.html" class="mobile-nav-chapters previous" title="Previous chapter">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="./user_guide/dumping_core.html" class="mobile-nav-chapters next" title="Next chapter">
                        <i class="fa fa-angle-right"></i>
                    </a>
                

            </div>

            
                <a href="./user_guide/directories_layout.html" class="nav-chapters previous" title="You can navigate through the chapters using the arrow keys">
                    <i class="fa fa-angle-left"></i>
                </a>
            

            
                <a href="./user_guide/dumping_core.html" class="nav-chapters next" title="You can navigate through the chapters using the arrow keys">
                    <i class="fa fa-angle-right"></i>
                </a>
            

        </div>


        <!-- Local fallback for Font Awesome -->
        <script>
            if ($(".fa").css("font-family") !== "FontAwesome") {
                $('<link rel="stylesheet" type="text/css" href="_FontAwesome/css/font-awesome.css">').prependTo('head');
            }
        </script>

        <!-- Livereload script (if served using the cli tool) -->
        
    <script type="text/javascript">
        var socket = new WebSocket("ws://localhost:3001");
        socket.onmessage = function (event) {
            if (event.data === "reload") {
                socket.close();
                location.reload(true); // force reload from server (not from cache)
            }
        };

        window.onbeforeunload = function() {
            socket.close();
        }
    </script>


        

        

        

        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS script -->
        
        <script type="text/javascript" src="custom.js"></script>
        

    </body>
</html>
